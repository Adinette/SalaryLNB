import{_ as x}from"./UserForm.vue_vue_type_script_setup_true_lang-Cx2Wminf.js";import{_ as w}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{f as y}from"./chunk-TVFJBHBT-BUrEn1b-.js";import{u as E}from"./use_user_actions-BzxLXgV7.js";import{d as _,a3 as F,k as u,f as B,o as f,w as c,b as r,h as l,i as m,n as C,a4 as $,a0 as L,a2 as j,q as N,a as S,g as T,F as R}from"./index-djH96c7W.js";import{A as q,U as z}from"./api_route-BfCuro4K.js";import{_ as D}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{b as d}from"./route-block-B_A1xBdJ.js";import"./index-C-RzZ9jy.js";import"./VRow-DOGGYPzI.js";import"./createSimpleFunctional-CGAgNBGN.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./VTextField-BiIaNMKF.js";const H={class:"pb-8"},p="Ajouter un utilisateur",I="Ajouter",P="ri-add-fill",W=_({__name:"UserAddView",setup(b){const o=F("userAddView"),e=u({first_name:"",last_name:"",email:"",phone:""}),s=u({first_name:[],last_name:[],email:[],phone:[]}),i=u(null),{processing:n,createUser:g}=E(),v=a=>{s.value.first_name=a.data.first_name||[],s.value.last_name=a.data.last_name||[],s.value.email=a.data.email||[],s.value.phone=a.data.phone||[]},U=async a=>{o.info("Création de l'utilisateur",a);const t=await g(a);return t instanceof q?(t instanceof z?v(t):(j.error(t.message),o.error("Erreur lors de la création de l'utilisateur",t)),i.value={type:"danger",id:y.string.uuid(),title:"Erreur",message:t.message},!1):(o.info("Utilisateur créé avec succès",t),!0)},A=()=>{s.value={first_name:[],last_name:[],email:[],phone:[]},i.value=null},h=async()=>{A(),o.info("Soumission du formulaire d'utilisateur",e.value),await U({...e.value,phone:$.removeWhitespace(e.value.phone)})&&L.push("/users")};return(a,t)=>{const k=x;return f(),B(w,{title:p,class:C(["block-mode-loading-oneui",{"block-mode-loading":m(n)}])},{default:c(()=>[r("div",H,[l(k,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=V=>e.value=V),loading:m(n),errors:s.value,alert:i.value,"action-description":p,"action-text":I,"action-icon":P,onSubmit:h},null,8,["modelValue","loading","errors","alert"])])]),_:1},8,["class"])}}}),G={"aria-label":"breadcrumb"},J={class:"breadcrumb breadcrumb-alt"},K={class:"breadcrumb-item","aria-current":"page"},M={class:"content"},O="Formulaire des utilisateurs",Q="Ajouter un utilisateur.",X=_({__name:"add",setup(b){return(o,e)=>{const s=N("RouterLink"),i=D,n=W;return f(),S(R,null,[l(i,{title:O,subtitle:Q},{extra:c(()=>[r("nav",G,[r("ol",J,[e[1]||(e[1]=r("li",{class:"breadcrumb-item","aria-current":"page"},"Utilisateurs",-1)),r("li",K,[l(s,{to:"/users"},{default:c(()=>[...e[0]||(e[0]=[T(" Liste des utilisateurs",-1)])]),_:1})]),e[2]||(e[2]=r("li",{class:"breadcrumb-item active","aria-current":"page"},"Formulaire des utilisateurs",-1))])])]),_:1}),r("div",M,[l(n)])],64)}}});typeof d=="function"&&d(X);export{X as default};
