import{_ as E}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{_ as M}from"./MachineForm.vue_vue_type_script_setup_true_lang-C7I5FcSl.js";import{_ as w}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{d as _,a3 as y,k as c,f as F,o as f,w as l,b as s,h as i,i as u,n as B,a0 as C,a2 as $,q as L,a as U,g as j,F as N}from"./index-djH96c7W.js";import{A as S,U as T}from"./api_route-BfCuro4K.js";import{u as R}from"./use_machine_actions-JCCI023B.js";import{b as d}from"./route-block-B_A1xBdJ.js";import"./index-C-RzZ9jy.js";import"./VRow-DOGGYPzI.js";import"./createSimpleFunctional-CGAgNBGN.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./VTextField-BiIaNMKF.js";import"./machines-DgIDqdM-.js";const q={class:"pb-8"},p="Ajouter une machine",z="Ajouter",D="fa fa-plus-circle",H=_({__name:"MachineAddView",setup(b){const r=y("machineAddView"),e=c({code:"",emplacement:"",is_active:!1}),o=c({code:[],emplacement:[],is_active:[]}),n=c(null),{processing:m,createMachine:g}=R(),v=t=>{o.value.code=t.data.code||[],o.value.emplacement=t.data.emplacement||[],o.value.is_active=t.data.is_active||[]},h=async t=>{r.info("Création de la machine",t);const a=await g(t);return a instanceof S?(a instanceof T?v(a):($.error(a.message),r.error("Erreur lors de la création de la machine",a)),n.value={type:"danger",id:"0012",title:"Erreur",message:a.message},!1):(r.info("Machine créée avec succès",a),!0)},A=()=>{o.value={code:[],emplacement:[],is_active:[]},n.value=null},k=async()=>{A(),r.info("Soumission du formulaire de machine",e.value),await h({...e.value})&&C.push("/machines")};return(t,a)=>{const x=M;return f(),F(w,{title:p,class:B(["block-mode-loading-oneui",{"block-mode-loading":u(m)}])},{default:l(()=>[s("div",q,[i(x,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=V=>e.value=V),loading:u(m),errors:o.value,alert:n.value,"action-description":p,"action-text":z,"action-icon":D,onSubmit:k},null,8,["modelValue","loading","errors","alert"])])]),_:1},8,["class"])}}}),I={"aria-label":"breadcrumb"},P={class:"breadcrumb breadcrumb-alt"},G={class:"breadcrumb-item","aria-current":"page"},J={class:"content"},K="Formulaire des machines",O="Ajouter une machine.",Q=_({__name:"add",setup(b){return(r,e)=>{const o=L("RouterLink"),n=E;return f(),U(N,null,[i(n,{title:K,subtitle:O},{extra:l(()=>[s("nav",I,[s("ol",P,[e[1]||(e[1]=s("li",{class:"breadcrumb-item","aria-current":"page"},"Machines",-1)),s("li",G,[i(o,{to:"/machines"},{default:l(()=>[...e[0]||(e[0]=[j(" Liste des machines",-1)])]),_:1})]),e[2]||(e[2]=s("li",{class:"breadcrumb-item active","aria-current":"page"},"Formulaire des machines",-1))])])]),_:1}),s("div",J,[i(H)])],64)}}});typeof d=="function"&&d(Q);export{Q as default};
