import{_ as Q}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{_ as W}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{d as z,H as X,m as Y,f as Z,o,w as n,h as l,i as a,a as r,e as b,b as t,F as N,r as ee,n as d,t as i,g as c,a1 as _,V as S,G as O,a2 as te}from"./index-djH96c7W.js";import{u as se}from"./use_operator_actions-DfzruNlO.js";import{u as ae,C as le,a as ne,V as ie}from"./CustomTable-BpPpXVY0.js";import{u as oe}from"./use_machine_actions-JCCI023B.js";import{V as ce}from"./VChip-CI_Lgiys.js";import{b as T}from"./route-block-B_A1xBdJ.js";import"./api_route-BfCuro4K.js";import"./machines-DgIDqdM-.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./VAvatar-DCqiVCq3.js";const re={class:"flex items-center gap-2"},de={class:"flex justify-end items-center gap-2"},ue={key:0,class:"mr-2 flex items-center"},me={key:0},fe={class:"info-column-"},pe={class:"info-name"},be={class:"info-detail"},_e={key:0,class:"info-detail"},ve={key:1,class:"info-detail"},ge={key:2,class:"info-detail"},ke={class:"text-center"},ye={class:"btn-group btn-group"},Ce=["onClick"],he=["onClick"],Se=["onClick"],Ve=["onClick"],xe=z({__name:"OperatorListView",setup(H){const{processing:u,operators:m,getOperators:f,updateOperatorActivateOrDeactivate:L,deleteOperator:V}=se(),{machines:M}=oe(),v=X();function D(p){v.push({path:"/operators-salary/add",query:{operatorId:p}})}const{selected:g,selectedCount:k,allSelected:x,someSelected:j,isSelected:$,toggleSelect:F,toggleSelectAll:G,clearSelection:I}=ae(()=>m.value),{tableClasses:y,getStatusBadge:U,getStatusText:q,commonHeaders:E}=ne(),P=E.operator(),R=async()=>{if(g.value.length===0)return;if(g.value.length>20){te.error("Vous ne pouvez pas supprimer plus de 20 utilisateurs à la fois.");return}if(confirm(`Êtes-vous sûr de vouloir supprimer ${k.value} utilisateur(s) sélectionné(s) ?`)){for(const e of g.value)await V(e.interface);I(),await f()}},w=p=>M.value.find(e=>e.id===p)||null,J=async()=>{await f()};return Y(async()=>{await f()}),(p,e)=>{const K=W;return o(),Z(K,{class:d(["block-mode-loading-oneui",{"block-mode-loading":a(u)}])},{title:n(()=>[t("div",re,[l(S,{icon:"fa fa-refresh",loading:a(u),disabled:a(u),color:"success",type:"button",onClick:J,class:"btn-block-option",variant:"tonal"},null,8,["loading","disabled"])])]),options:n(()=>[t("div",de,[a(k)>0?(o(),r("div",ue,[l(ce,{color:"primary",size:"small",class:"mr-2"},{default:n(()=>[c(i(a(k))+" sélectionné(s)",1)]),_:1}),l(S,{type:"button",variant:"flat",color:"error",class:"mr-1",loading:a(u),disabled:a(u),onClick:R},{default:n(()=>[l(O,{icon:"fa fa-delete",size:"small"}),e[1]||(e[1]=t("span",{class:"ml-1"},"Supprimer",-1))]),_:1},8,["loading","disabled"])])):b("",!0),l(S,{type:"button",variant:"flat",color:"success",onClick:e[0]||(e[0]=C=>a(v).push("/operators/add"))},{default:n(()=>[l(O,{icon:"fa fa-plus",size:"small"}),e[2]||(e[2]=t("span",{class:"ml-1"},"Ajouter",-1))]),_:1})])]),default:n(()=>[l(le,{headers:a(P),items:a(m),selectable:!0,"all-selected":a(x),"some-selected":a(j)&&!a(x),onToggleSelectAll:a(G)},{body:n(({items:C})=>[C.length===0?(o(),r("tr",me,[...e[3]||(e[3]=[t("td",{colspan:"4",class:"text-center text-muted py-4"}," Aucun opérateur trouvé ",-1)])])):b("",!0),(o(!0),r(N,null,ee(C,s=>{var A,B;return o(),r("tr",{key:s.id,class:d({"table-active":a($)(s)})},[t("td",null,[l(ie,{"model-value":a($)(s),"hide-details":"","onUpdate:modelValue":()=>a(F)(s)},null,8,["model-value","onUpdate:modelValue"])]),t("td",fe,[t("div",pe,i(s.fullName),1),t("div",be,[e[4]||(e[4]=t("i",{class:"fa fa-envelope me-1"},null,-1)),c(i(s.email),1)]),s.phone?(o(),r("div",_e,[e[5]||(e[5]=t("i",{class:"fa fa-phone me-1"},null,-1)),c(i(s.phone),1)])):b("",!0),s.machine_id?(o(),r("div",ve,[e[6]||(e[6]=t("i",{class:"fa fa-mobile me-1"},null,-1)),c(" ["+i((A=w(s.machine_id))==null?void 0:A.code)+"] - "+i((B=w(s.machine_id))==null?void 0:B.emplacement),1)])):(o(),r("div",ge,[e[7]||(e[7]=t("i",{class:"fa fa-mobile me-1"},null,-1)),c(" ["+i(s.machine.code)+"] - "+i(s.machine.emplacement),1)]))]),t("td",null,[t("span",{class:d(a(U)(s.is_active))},i(a(q)(s.is_active)),3)]),t("td",ke,[t("div",ye,[t("button",{type:"button",class:"btn btn-sm btn-alt-secondary",onClick:h=>a(L)(s.id,s.is_active,{first_name:s.first_name,last_name:s.last_name})},[t("i",{class:d(`${s.is_active?"fa-ban":"fa-check-double"} fa fa-fw mr-0`)},null,2),l(_,{activator:"parent",location:"top"},{default:n(()=>[c(i(s.is_active?"Désactiver":"Activer"),1)]),_:2},1024)],8,Ce),s.is_active?(o(),r("button",{key:0,type:"button",class:d(a(y).button.action),onClick:h=>D(s.id)},[e[9]||(e[9]=t("i",{class:"fa fa-calculator mr-0"},null,-1)),l(_,{activator:"parent",location:"top"},{default:n(()=>[...e[8]||(e[8]=[c("Calculer le salaire",-1)])]),_:1})],10,he)):b("",!0),t("button",{type:"button",class:d(a(y).button.action),onClick:h=>{a(v).push(`/operators/edit/${s.id}`)}},[e[11]||(e[11]=t("i",{class:"fa fa-fw fa-pencil-alt mr-0"},null,-1)),l(_,{activator:"parent",location:"top"},{default:n(()=>[...e[10]||(e[10]=[c("Modifier",-1)])]),_:1})],10,Se),t("button",{type:"button",class:d(a(y).button.danger),onClick:h=>a(V)(s.interface)},[e[13]||(e[13]=t("i",{class:"fa fa-fw fa-times mr-0"},null,-1)),l(_,{activator:"parent",location:"top"},{default:n(()=>[...e[12]||(e[12]=[c("Supprimer",-1)])]),_:1})],10,Ve)])])],2)}),128))]),_:1},8,["headers","items","all-selected","some-selected","onToggleSelectAll"])]),_:1},8,["class"])}}}),$e={class:"content"},we="Opérateurs",Ae="Gérez les opérateurs de l'entreprise efficacement.",Be=z({__name:"index",setup(H){return(u,m)=>{const f=Q;return o(),r(N,null,[l(f,{title:we,subtitle:Ae},{extra:n(()=>[...m[0]||(m[0]=[t("nav",{"aria-label":"breadcrumb"},[t("ol",{class:"breadcrumb breadcrumb-alt"},[t("li",{class:"breadcrumb-item","aria-current":"page"},"Opérateurs"),t("li",{class:"breadcrumb-item","aria-current":"page"},"Liste des opérateurs")])],-1)])]),_:1}),t("div",$e,[l(xe)])],64)}}});typeof T=="function"&&T(Be);export{Be as default};
