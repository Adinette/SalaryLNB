import{u as Oe,a as be,m as Me}from"./VTextField-BiIaNMKF.js";import{a6 as me,a7 as J,b0 as Ce,R as Y,aa as pe,b as x,F as le,ac as M,ao as Ae,b1 as He,aE as W,aR as Ve,k as Z,c as H,b2 as ze,b3 as Re,b4 as de,aT as Ne,$ as De,aW as Be,b5 as Ue,ax as $e,b6 as se,b7 as Ke,m as qe,b8 as We,h as T,b9 as re,O as je,n as Ye,aP as Ge,aU as Fe,a9 as Xe,a5 as we,a8 as ke,aS as Ze,a_ as fe,G as Se,ba as Je,aY as Qe,ap as et,g as tt,ad as lt,bb as at,ae as nt,aZ as Pe,a$ as Ie,ar as ot}from"./index-djH96c7W.js";import{b as ut}from"./VInput-CtsUFMyD.js";import{u as rt,V as st,a as it,b as Te,d as ct,e as dt,f as ft,m as vt}from"./VMenu-C6zDN-ie.js";import{a as mt,V as xe}from"./VChip-CI_Lgiys.js";import{V as pt}from"./VAvatar-DCqiVCq3.js";const ht=J({renderless:Boolean,...Ae()},"VVirtualScrollItem"),gt=me()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ht(),emits:{"update:height":e=>!0},setup(e,i){let{attrs:l,emit:d,slots:n}=i;const{resizeRef:v,contentRect:p}=Ce(void 0,"border");Y(()=>{var a;return(a=p.value)==null?void 0:a.height},a=>{a!=null&&d("update:height",a)}),pe(()=>{var a,c;return e.renderless?x(le,null,[(a=n.default)==null?void 0:a.call(n,{itemRef:v})]):x("div",M({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(c=n.default)==null?void 0:c.call(n)])})}}),yt=-1,bt=1,ve=100,Vt=J({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function wt(e,i){const l=He(),d=W(0);Ve(()=>{d.value=parseFloat(e.itemHeight||0)});const n=W(0),v=W(Math.ceil((parseInt(e.height)||l.height.value)/(d.value||16))||1),p=W(0),a=W(0),c=Z(),P=Z();let s=0;const{resizeRef:$,contentRect:R}=Ce();Ve(()=>{$.value=c.value});const I=H(()=>{var o;return c.value===document.documentElement?l.height.value:((o=R.value)==null?void 0:o.height)||parseInt(e.height)||0}),G=H(()=>!!(c.value&&P.value&&I.value&&d.value));let g=Array.from({length:i.value.length}),m=Array.from({length:i.value.length});const V=W(0);let C=-1;function _(o){return g[o]||d.value}const K=ze(()=>{const o=performance.now();m[0]=0;const f=i.value.length;for(let w=1;w<=f;w++)m[w]=(m[w-1]||0)+_(w-1);V.value=Math.max(V.value,performance.now()-o)},V),Q=Y(G,o=>{o&&(Q(),s=P.value.offsetTop,K.immediate(),z(),~C&&De(()=>{Be&&window.requestAnimationFrame(()=>{j(C),C=-1})}))});Re(()=>{K.clear()});function y(o,f){const w=g[o],A=d.value;d.value=A?Math.min(d.value,f):f,(w!==f||A!==d.value)&&(g[o]=f,K())}function E(o){o=de(o,0,i.value.length);const f=Math.floor(o),w=o%1,A=f+1,t=m[f]||0,u=m[A]||t;return t+(u-t)*w}function ae(o){return kt(m,o)}let X=0,q=0,ee=0;Y(I,(o,f)=>{f&&(z(),o<f&&requestAnimationFrame(()=>{q=0,z()}))});let L=-1;function ie(){if(!c.value||!P.value)return;const o=c.value.scrollTop,f=performance.now();f-ee>500?(q=Math.sign(o-X),s=P.value.offsetTop):q=o-X,X=o,ee=f,window.clearTimeout(L),L=window.setTimeout(ne,500),z()}function ne(){!c.value||!P.value||(q=0,ee=0,window.clearTimeout(L),z())}let oe=-1;function z(){cancelAnimationFrame(oe),oe=requestAnimationFrame(ue)}function ue(){if(!c.value||!I.value||!d.value)return;const o=X-s,f=Math.sign(q),w=Math.max(0,o-ve),A=de(ae(w),0,i.value.length),t=o+I.value+ve,u=de(ae(t)+1,A+1,i.value.length);if((f!==yt||A<n.value)&&(f!==bt||u>v.value)){const k=E(n.value)-E(A),N=E(u)-E(v.value);Math.max(k,N)>ve?(n.value=A,v.value=u):(A<=0&&(n.value=A),u>=i.value.length&&(v.value=u))}p.value=E(n.value),a.value=E(i.value.length)-E(v.value)}function j(o){const f=E(o);!c.value||o&&!f?C=o:c.value.scrollTop=f}const ce=H(()=>i.value.slice(n.value,v.value).map((o,f)=>{const w=f+n.value;return{raw:o,index:w,key:Ne(o,e.itemKey,w)}}));return Y(i,()=>{g=Array.from({length:i.value.length}),m=Array.from({length:i.value.length}),K.immediate(),z()},{deep:1}),{calculateVisibleItems:z,containerRef:c,markerRef:P,computedItems:ce,paddingTop:p,paddingBottom:a,scrollToIndex:j,handleScroll:ie,handleScrollend:ne,handleItemResize:y}}function kt(e,i){let l=e.length-1,d=0,n=0,v=null,p=-1;if(e[l]<i)return l;for(;d<=l;)if(n=d+l>>1,v=e[n],v>i)l=n-1;else if(v<i)p=n,d=n+1;else return v===i?n:d;return p}const St=J({items:{type:Array,default:()=>[]},renderless:Boolean,...Vt(),...Ae(),...Ge()},"VVirtualScroll"),Pt=me()({name:"VVirtualScroll",props:St(),setup(e,i){let{slots:l}=i;const d=Ue("VVirtualScroll"),{dimensionStyles:n}=$e(e),{calculateVisibleItems:v,containerRef:p,markerRef:a,handleScroll:c,handleScrollend:P,handleItemResize:s,scrollToIndex:$,paddingTop:R,paddingBottom:I,computedItems:G}=wt(e,se(()=>e.items));return Ke(()=>e.renderless,()=>{function g(){var C,_;const V=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[V]("scroll",c,{passive:!0}),document[V]("scrollend",P)):((C=p.value)==null||C[V]("scroll",c,{passive:!0}),(_=p.value)==null||_[V]("scrollend",P))}qe(()=>{p.value=We(d.vnode.el,!0),g(!0)}),Re(g)}),pe(()=>{const g=G.value.map(m=>T(gt,{key:m.key,renderless:e.renderless,"onUpdate:height":V=>s(m.index,V)},{default:V=>{var C;return(C=l.default)==null?void 0:C.call(l,{item:m.raw,index:m.index,...V})}}));return e.renderless?x(le,null,[x("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:re(R.value)}},null),g,x("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:re(I.value)}},null)]):x("div",{ref:p,class:Ye(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:P,style:je([n.value,e.style])},[x("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:re(R.value),paddingBottom:re(I.value)}},[g])])}),{calculateVisibleItems:v,scrollToIndex:$}}});function It(e,i){const l=W(!1);let d;function n(a){cancelAnimationFrame(d),l.value=!0,d=requestAnimationFrame(()=>{d=requestAnimationFrame(()=>{l.value=!1})})}async function v(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const c=Y(l,()=>{c(),a()})}else a()})}async function p(a){var s,$;if(a.key==="Tab"&&((s=i.value)==null||s.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const c=($=e.value)==null?void 0:$.$el;if(!c)return;(a.key==="Home"||a.key==="End")&&c.scrollTo({top:a.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await v();const P=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const R=c.getBoundingClientRect().top;for(const I of P)if(I.getBoundingClientRect().top>=R){I.focus();break}}else{const R=c.getBoundingClientRect().bottom;for(const I of[...P].reverse())if(I.getBoundingClientRect().bottom<=R){I.focus();break}}}return{onScrollPassive:n,onKeydown:p}}const Tt=J({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function xt(e,i){const{t:l}=Fe(),d=Xe(),n=H(()=>`menu-${d}`),v=se(()=>we(i)),p=se(()=>n.value),a=se(()=>l(we(i)?e.closeText:e.openText));return{menuId:n,ariaExpanded:v,ariaControls:p,ariaLabel:a}}const Ct=J({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ot,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Tt(),...vt({itemChildren:!1})},"Select"),At=J({...Ct(),...nt(Me({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...at({transition:{component:ft}})},"VSelect"),Lt=me()({name:"VSelect",props:At(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,i){let{slots:l}=i;const{t:d}=Fe(),n=Z(),v=Z(),p=Z(),{items:a,transformIn:c,transformOut:P}=rt(e),s=ke(e,"modelValue",[],t=>c(t===null?[null]:Ze(t)),t=>{const u=P(t);return e.multiple?u:u[0]??null}),$=H(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:s.value.length),R=ut(e),I=Oe(e),G=H(()=>s.value.map(t=>t.value)),g=W(!1);let m="",V=-1,C;const _=H(()=>e.hideSelected?a.value.filter(t=>!s.value.some(u=>(e.valueComparator||fe)(u,t))):a.value),K=H(()=>e.hideNoData&&!_.value.length||R.isReadonly.value||R.isDisabled.value),Q=ke(e,"menu"),y=H({get:()=>Q.value,set:t=>{var u;Q.value&&!t&&((u=v.value)!=null&&u.Î¨openChildren.size)||t&&K.value||(Q.value=t)}}),{menuId:E,ariaExpanded:ae,ariaControls:X,ariaLabel:q}=xt(e,y),ee=H(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),L=Z(),ie=It(L,n);function ne(t){e.openOnClear&&(y.value=!0)}function oe(){K.value||(y.value=!y.value)}function z(t){Pe(t)&&ue(t)}function ue(t){var h,F,S;if(!t.key||R.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(y.value=!0),["Escape","Tab"].includes(t.key)&&(y.value=!1),t.key==="Home"?(h=L.value)==null||h.focus("first"):t.key==="End"&&((F=L.value)==null||F.focus("last"));const u=1e3;if(!Pe(t))return;const k=performance.now();k-C>u&&(m="",V=-1),m+=t.key.toLowerCase(),C=k;const N=_.value;function U(){let b=r();return b||m.at(-1)===m.at(-2)&&(m=m.slice(0,-1),b=r(),b)||(V=-1,b=r(),b)?b:(m=t.key.toLowerCase(),r())}function r(){for(let b=V+1;b<N.length;b++){const te=N[b];if(te.title.toLowerCase().startsWith(m))return[te,b]}}const D=U();if(!D)return;const[B,O]=D;V=O,(S=L.value)==null||S.focus(O),e.multiple||(s.value=[B])}function j(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const k=s.value.findIndex(U=>(e.valueComparator||fe)(U.value,t.value)),N=u??!~k;if(~k){const U=N?[...s.value,t]:[...s.value];U.splice(k,1),s.value=U}else N&&(s.value=[...s.value,t])}else{const k=u!==!1;s.value=k?[t]:[],De(()=>{y.value=!1})}}function ce(t){var u;(u=L.value)!=null&&u.$el.contains(t.relatedTarget)||(y.value=!1)}function o(){var t;e.eager&&((t=p.value)==null||t.calculateVisibleItems())}function f(){var t;g.value&&((t=n.value)==null||t.focus())}function w(t){g.value=!0}function A(t){if(t==null)s.value=[];else if(Ie(n.value,":autofill")||Ie(n.value,":-webkit-autofill")){const u=a.value.find(k=>k.title===t);u&&j(u)}else n.value&&(n.value.value="")}return Y(y,()=>{if(!e.hideSelected&&y.value&&s.value.length){const t=_.value.findIndex(u=>s.value.some(k=>(e.valueComparator||fe)(k.value,u.value)));Be&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var u;t>=0&&((u=p.value)==null||u.scrollToIndex(t))})}}),Y(a,(t,u)=>{y.value||g.value&&e.hideNoData&&!u.length&&t.length&&(y.value=!0)}),pe(()=>{const t=!!(e.chips||l.chip),u=!!(!e.hideNoData||_.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),k=s.value.length>0,N=be.filterProps(e),U=k||!g.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return T(be,M({ref:n},N,{modelValue:s.value.map(r=>r.props.title).join(", "),name:void 0,"onUpdate:modelValue":A,focused:g.value,"onUpdate:focused":r=>g.value=r,validationValue:s.externalValue,counterValue:$.value,dirty:k,class:["v-select",{"v-select--active-menu":y.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:U,"onClick:clear":ne,"onMousedown:control":oe,onBlur:ce,onKeydown:ue,"aria-expanded":ae.value,"aria-controls":X.value,"aria-label":q.value,title:q.value}),{...l,default:()=>x(le,null,[x("select",{hidden:!0,multiple:e.multiple,name:I.fieldName.value},[a.value.map(r=>x("option",{key:r.value,value:r.value,selected:G.value.includes(r.value)},null))]),T(st,M({id:E.value,ref:v,modelValue:y.value,"onUpdate:modelValue":r=>y.value=r,activator:"parent",contentClass:"v-select__content",disabled:K.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:o,onAfterLeave:f},ee.value),{default:()=>[u&&T(it,M({ref:L,selected:G.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:z,onFocusin:w,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},ie,e.listProps),{default:()=>{var r,D,B;return[(r=l["prepend-item"])==null?void 0:r.call(l),!_.value.length&&!e.hideNoData&&(((D=l["no-data"])==null?void 0:D.call(l))??T(Te,{key:"no-data",title:d(e.noDataText)},null)),T(Pt,{ref:p,renderless:!0,items:_.value,itemKey:"value"},{default:O=>{var he,ge,ye;let{item:h,index:F,itemRef:S}=O;const b=Je(h.props),te=M(h.props,{ref:S,key:h.value,onClick:()=>j(h,null)});return h.type==="divider"?((he=l.divider)==null?void 0:he.call(l,{props:h.raw,index:F}))??T(ct,M(h.props,{key:`divider-${F}`}),null):h.type==="subheader"?((ge=l.subheader)==null?void 0:ge.call(l,{props:h.raw,index:F}))??T(dt,M(h.props,{key:`subheader-${F}`}),null):((ye=l.item)==null?void 0:ye.call(l,{item:h,index:F,props:te}))??T(Te,M(te,{role:"option"}),{prepend:_e=>{let{isSelected:Ee}=_e;return x(le,null,[e.multiple&&!e.hideSelected?T(mt,{key:h.value,modelValue:Ee,ripple:!1,tabindex:"-1",onClick:Le=>Le.preventDefault()},null):void 0,b.prependAvatar&&T(pt,{image:b.prependAvatar},null),b.prependIcon&&T(Se,{icon:b.prependIcon},null)])}})}}),(B=l["append-item"])==null?void 0:B.call(l)]}})]}),s.value.map((r,D)=>{function B(S){S.stopPropagation(),S.preventDefault(),j(r,!1)}const O=M(xe.filterProps(r.props),{"onClick:close":B,onKeydown(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),B(S))},onMousedown(S){S.preventDefault(),S.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),h=t?!!l.chip:!!l.selection,F=h?Qe(t?l.chip({item:r,index:D,props:O}):l.selection({item:r,index:D})):void 0;if(!(h&&!F))return x("div",{key:r.value,class:"v-select__selection"},[t?l.chip?T(et,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[F]}):T(xe,M({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},O),null):F??x("span",{class:"v-select__selection-text"},[r.title,e.multiple&&D<s.value.length-1&&x("span",{class:"v-select__selection-comma"},[tt(",")])])])})]),"append-inner":function(){var O,h;for(var r=arguments.length,D=new Array(r),B=0;B<r;B++)D[B]=arguments[B];return x(le,null,[(O=l["append-inner"])==null?void 0:O.call(l,...D),e.menuIcon?T(Se,{class:"v-select__menu-icon",color:(h=n.value)==null?void 0:h.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),lt({isFocused:g,menu:y,select:j},n)}});export{Lt as V,It as a,Pt as b,Ct as m,xt as u};
