import{_ as q}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{u as J,C as K,a as O,V as R}from"./CustomTable-BpPpXVY0.js";import{d as B,k as W,c as X,m as Y,f as Z,o as n,w as o,h as l,i as t,a as r,e as v,b as e,F as $,r as ee,n as u,t as m,g as p,a0 as x,a1 as h,V as k,G as w,a2 as te}from"./index-djH96c7W.js";import{u as se}from"./use_user_actions-BzxLXgV7.js";import{V as ae}from"./VChip-CI_Lgiys.js";import{_ as le}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{b as U}from"./route-block-B_A1xBdJ.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./api_route-BfCuro4K.js";import"./chunk-TVFJBHBT-BUrEn1b-.js";import"./VAvatar-DCqiVCq3.js";const oe={class:"flex items-center gap-2"},ne={class:"flex justify-end items-center gap-2"},ie={key:0,class:"mr-2 flex items-center"},re={key:0},ce={class:"info-column-"},de={class:"info-name"},ue={class:"info-detail"},me={key:0,class:"info-detail"},pe={class:"text-center"},fe={class:"btn-group btn-group-"},be=["onClick"],_e=["onClick"],ge=B({__name:"UserListView",setup(T){const{processing:i,users:c,getUsers:d,deleteUser:f}=se(),A=W(""),y=X(()=>({search:A.value||void 0})),{selected:b,selectedCount:_,allSelected:C,someSelected:z,isSelected:V,toggleSelect:L,toggleSelectAll:N,clearSelection:H}=J(()=>c.value),{tableClasses:S,getStatusBadge:j,getStatusText:F,commonHeaders:G}=O(),M=G.user(),D=async()=>{if(b.value.length===0)return;if(b.value.length>20){te.error("Vous ne pouvez pas supprimer plus de 20 utilisateurs à la fois.");return}if(confirm(`Êtes-vous sûr de vouloir supprimer ${_.value} utilisateur(s) sélectionné(s) ?`)){for(const s of b.value)await f(s.interface);H(),await d(y.value)}},E=async()=>{await d(y.value)};return Y(async()=>{await d()}),(I,s)=>{const P=q;return n(),Z(P,{class:u(["block-mode-loading-oneui",{"block-mode-loading":t(i)}])},{title:o(()=>[e("div",oe,[l(k,{icon:"fa fa-refresh",loading:t(i),disabled:t(i),color:"success",type:"button",onClick:E,class:"btn-block-option",variant:"tonal"},null,8,["loading","disabled"])])]),options:o(()=>[e("div",ne,[t(_)>0?(n(),r("div",ie,[l(ae,{color:"primary",size:"small",class:"mr-2"},{default:o(()=>[p(m(t(_))+" sélectionné(s)",1)]),_:1}),l(k,{type:"button",variant:"flat",color:"error",class:"mr-1",loading:t(i),disabled:t(i),onClick:D},{default:o(()=>[l(w,{icon:"fa fa-delete",size:"small"}),s[1]||(s[1]=e("span",{class:"ml-1"},"Supprimer",-1))]),_:1},8,["loading","disabled"])])):v("",!0),l(k,{type:"button",variant:"flat",color:"success",onClick:s[0]||(s[0]=g=>t(x).push("/users/add"))},{default:o(()=>[l(w,{icon:"fa fa-plus",size:"small"}),s[2]||(s[2]=e("span",{class:"ml-1"},"Ajouter",-1))]),_:1})])]),default:o(()=>[l(K,{headers:t(M),items:t(c),selectable:!0,"all-selected":t(C),"some-selected":t(z)&&!t(C),onToggleSelectAll:t(N)},{body:o(({items:g})=>[g.length===0?(n(),r("tr",re,[...s[3]||(s[3]=[e("td",{colspan:"4",class:"text-center text-muted py-4"}," Aucun utilisateur trouvé ",-1)])])):v("",!0),(n(!0),r($,null,ee(g,a=>(n(),r("tr",{key:a.id,class:u({"table-active":t(V)(a)})},[e("td",null,[l(R,{"model-value":t(V)(a),"hide-details":"","onUpdate:modelValue":()=>t(L)(a)},null,8,["model-value","onUpdate:modelValue"])]),e("td",ce,[e("div",de,m(a.fullName),1),e("div",ue,[s[4]||(s[4]=e("i",{class:"fa fa-envelope me-1"},null,-1)),p(m(a.email),1)]),a.phone?(n(),r("div",me,[s[5]||(s[5]=e("i",{class:"fa fa-phone me-1"},null,-1)),p(m(a.phone),1)])):v("",!0)]),e("td",null,[e("span",{class:u(t(j)(a.is_active))},m(t(F)(a.is_active)),3)]),e("td",pe,[e("div",fe,[e("button",{type:"button",class:u(t(S).button.action),onClick:Q=>{t(x).push(`/users/edit/${a.id}`)}},[s[7]||(s[7]=e("i",{class:"fa fa-fw fa-pencil-alt mr-0"},null,-1)),l(h,{activator:"parent",location:"top"},{default:o(()=>[...s[6]||(s[6]=[p("Modifier",-1)])]),_:1})],10,be),e("button",{type:"button",class:u(t(S).button.danger),onClick:Q=>t(f)(a.interface)},[s[9]||(s[9]=e("i",{class:"fa fa-fw fa-times mr-0"},null,-1)),l(h,{activator:"parent",location:"top"},{default:o(()=>[...s[8]||(s[8]=[p("Supprimer",-1)])]),_:1})],10,_e)])])],2))),128))]),_:1},8,["headers","items","all-selected","some-selected","onToggleSelectAll"])]),_:1},8,["class"])}}}),ve={class:"content"},ke="Utilisateurs",ye="Gérez les utilisateurs de l'entreprise efficacement.",Ce=B({__name:"index",setup(T){return(i,c)=>{const d=le,f=ge;return n(),r($,null,[l(d,{title:ke,subtitle:ye},{extra:o(()=>[...c[0]||(c[0]=[e("nav",{"aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb breadcrumb-alt"},[e("li",{class:"breadcrumb-item","aria-current":"page"},"Utilisateurs"),e("li",{class:"breadcrumb-item","aria-current":"page"},"Liste des utilisateurs")])],-1)])]),_:1}),e("div",ve,[l(f)])],64)}}});typeof U=="function"&&U(Ce);export{Ce as default};
