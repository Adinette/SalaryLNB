import{_ as Z}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{_ as ee}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{a5 as I,d as G,k as te,c as se,m as oe,f as ae,o as u,w as r,h as i,i as t,a as m,e as _,b as s,F as W,r as le,n as x,g as c,t as g,a0 as O,a1 as S,V as B,G as M,a2 as ie}from"./index-djH96c7W.js";import{u as ne,C as re,a as ue,V as de}from"./CustomTable-BpPpXVY0.js";import{u as ce}from"./use_operator_salary_ action-KJsmK9Ap.js";import{u as me}from"./use_operator_actions-DfzruNlO.js";import{V as fe}from"./VTextField-BiIaNMKF.js";import{V as pe}from"./VSelect-D7Z0k7d_.js";import{V as be}from"./VChip-CI_Lgiys.js";import{b as P}from"./route-block-B_A1xBdJ.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./api_route-BfCuro4K.js";import"./machines-DgIDqdM-.js";import"./VMenu-C6zDN-ie.js";import"./createSimpleFunctional-CGAgNBGN.js";import"./VAvatar-DCqiVCq3.js";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const j=()=>{};function ge(v,l){function n(...o){return new Promise((b,f)=>{Promise.resolve(v(()=>l.apply(this,o),{fn:l,thisArg:this,args:o})).then(b).catch(f)})}return n}function ve(v,l={}){let n,o,b=j;const f=p=>{clearTimeout(p),b(),b=j};let w;return p=>{const y=I(v),k=I(l.maxWait);return n&&f(n),y<=0||k!==void 0&&k<=0?(o&&(f(o),o=void 0),Promise.resolve(p())):new Promise((C,F)=>{b=l.rejectOnCancel?F:C,w=p,k&&!o&&(o=setTimeout(()=>{n&&f(n),o=void 0,C(w())},k)),n=setTimeout(()=>{o&&f(o),o=void 0,C(p())},y)})}}function _e(v,l=200,n={}){return ge(ve(l,n),v)}const ke={class:"flex items-center gap-2"},Ce={class:"flex justify-end items-center gap-2"},ye={key:0,class:"mr-2 flex items-center"},Ve={key:0},xe={class:"info-column"},we={key:0,class:"info-detail"},Te={key:1,class:"info-detail"},he={key:2,class:"info-detail"},Ae={key:3,class:"info-detail"},Be={key:4,class:"info-detail"},Fe={class:"text-center"},$e={class:"btn-group btn-group-"},Oe=["onClick"],Se=["onClick"],Ne=["onClick"],De=G({__name:"OperatorSalaryListView",setup(v){const{processing:l,operatorSalary:n,getOperatorSalary:o,deleteOperatorSalary:b}=ce(),{operators:f,getOperators:w}=me(),{selected:T,selectedCount:p,allSelected:y,someSelected:k,isSelected:C,toggleSelect:F,toggleSelectAll:R,clearSelection:N}=ne(()=>n.value),{tableClasses:$,commonHeaders:U}=ue(),E=U.operatorSalary(),h=te(null),Q=se(()=>({operator_id:h.value!==null?h.value:void 0})),q=_e(async()=>{await o(Q.value),N()},300),J=async()=>{if(T.value.length===0)return;if(T.value.length>20){ie.error("Vous ne pouvez pas supprimer plus de 20 utilisateurs à la fois.");return}if(confirm(`Êtes-vous sûr de vouloir supprimer ${p.value} utilisateur(s) sélectionné(s) ?`)){for(const e of T.value)await b(e.interface);N(),await o()}},D=d=>f.value.find(e=>e.id===d)||null,K=d=>d?new Date(d).toLocaleString("fr-FR",{month:"long",year:"numeric"}):"",A=d=>!d&&d!==0?"":Number(d).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}),X=async()=>{await o()};return oe(async()=>{await o(),await w()}),(d,e)=>{const Y=ee;return u(),ae(Y,{class:x(["block-mode-loading-oneui",{"block-mode-loading":t(l)}])},{title:r(()=>[s("div",ke,[i(B,{icon:"fa fa-refresh",loading:t(l),disabled:t(l),color:"success",type:"button",onClick:X,class:"btn-block-option",variant:"tonal"},null,8,["loading","disabled"])])]),options:r(()=>[s("div",Ce,[i(fe,{cols:"4"},{default:r(()=>[i(pe,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=V=>h.value=V),items:t(f),"item-title":"fullName","item-value":"id",placeholder:"Filtrer par opérateurs",density:"compact",disabled:t(l)},null,8,["modelValue","items","disabled"])]),_:1}),i(B,{variant:"flat",color:"success","prepend-icon":"fa fa-filter",disabled:t(l),loading:t(l),onClick:t(q)},{default:r(()=>[...e[2]||(e[2]=[c(" Filtrer ",-1)])]),_:1},8,["disabled","loading","onClick"]),t(p)>0?(u(),m("div",ye,[i(be,{color:"primary",size:"small",class:"mr-2"},{default:r(()=>[c(g(t(p))+" sélectionné(s)",1)]),_:1}),i(B,{type:"button",variant:"flat",color:"error",class:"mr-1",loading:t(l),disabled:t(l),onClick:J},{default:r(()=>[i(M,{icon:"fa fa-delete",size:"small"}),e[3]||(e[3]=s("span",{class:"ml-1"},"Supprimer",-1))]),_:1},8,["loading","disabled"])])):_("",!0),i(B,{type:"button",variant:"flat",color:"success",onClick:e[1]||(e[1]=V=>t(O).push("/operators-salary/add"))},{default:r(()=>[i(M,{icon:"fa fa-plus",size:"small"}),e[4]||(e[4]=s("span",{class:"ml-1"},"Ajouter",-1))]),_:1})])]),default:r(()=>[i(re,{headers:t(E),items:t(n),selectable:!0,"all-selected":t(y),"some-selected":t(k)&&!t(y),onToggleSelectAll:t(R)},{body:r(({items:V})=>[V.length===0?(u(),m("tr",Ve,[...e[5]||(e[5]=[s("td",{colspan:"4",class:"text-center text-muted py-4"}," Aucun salaire calculé trouvé ",-1)])])):_("",!0),(u(!0),m(W,null,le(V,a=>{var L,z;return u(),m("tr",{key:a.id,class:x({"table-active":t(C)(a)})},[s("td",null,[i(de,{"model-value":t(C)(a),"hide-details":"","onUpdate:modelValue":()=>t(F)(a)},null,8,["model-value","onUpdate:modelValue"])]),s("td",xe,[a.operator_id?(u(),m("div",we,[e[6]||(e[6]=s("i",{class:"fa fa-mobile me-1"},null,-1)),c(" Nom et prénom de l'operateur: "+g((L=D(a.operator_id))==null?void 0:L.first_name)+" "+g((z=D(a.operator_id))==null?void 0:z.last_name),1)])):_("",!0),a.chiffreAffaireMensuelttc?(u(),m("div",Te,[e[7]||(e[7]=s("i",{class:"fa fa-money-bill-wave me-1"},null,-1)),c(" Chiffre d'affaire mensuel TTC: "+g(A(a.chiffreAffaireMensuelttc)),1)])):_("",!0),a.chiffreAffaireHorsTaxe?(u(),m("div",he,[e[8]||(e[8]=s("i",{class:"fa fa-coins me-1"},null,-1)),c(" Chiffre d'affaire hors taxe: "+g(A(a.chiffreAffaireHorsTaxe)),1)])):_("",!0),a.commissionBrute?(u(),m("div",Ae,[e[9]||(e[9]=s("i",{class:"fa fa-chart-line me-1"},null,-1)),c(" Commission brute: "+g(A(a.commissionBrute)),1)])):_("",!0),a.salaireBrut?(u(),m("div",Be,[e[10]||(e[10]=s("i",{class:"fa fa-wallet me-1"},null,-1)),c(" Salaire: "+g(A(a.salaireBrut))+" du mois de "+g(K(a.date)),1)])):_("",!0)]),s("td",Fe,[s("div",$e,[s("button",{type:"button",class:x(t($).button.action),onClick:H=>{t(O).push(`/operators-salary/edit/${a.id}`)}},[e[12]||(e[12]=s("i",{class:"fa fa-fw fa-pencil-alt mr-0"},null,-1)),i(S,{activator:"parent",location:"top"},{default:r(()=>[...e[11]||(e[11]=[c("Modifier",-1)])]),_:1})],10,Oe),s("button",{type:"button",class:x(t($).button.action),onClick:H=>{t(O).push(`/operators-salary/details/${a.id}`)}},[e[14]||(e[14]=s("i",{class:"fa fa-eye mr-0"},null,-1)),i(S,{activator:"parent",location:"top"},{default:r(()=>[...e[13]||(e[13]=[c("Details et Impression",-1)])]),_:1})],10,Se),s("button",{type:"button",class:x(t($).button.danger),onClick:H=>t(b)(a.interface)},[e[16]||(e[16]=s("i",{class:"fa fa-fw fa-times mr-0"},null,-1)),i(S,{activator:"parent",location:"top"},{default:r(()=>[...e[15]||(e[15]=[c("Supprimer",-1)])]),_:1})],10,Ne)])])],2)}),128))]),_:1},8,["headers","items","all-selected","some-selected","onToggleSelectAll"])]),_:1},8,["class"])}}}),Le={class:"content"},ze="Listes des salaires",He="Gérez la listes des  salaires.",Ie=G({__name:"index",setup(v){return(l,n)=>{const o=Z;return u(),m(W,null,[i(o,{title:ze,subtitle:He},{extra:r(()=>[...n[0]||(n[0]=[s("nav",{"aria-label":"breadcrumb"},[s("ol",{class:"breadcrumb breadcrumb-alt"},[s("li",{class:"breadcrumb-item","aria-current":"page"},"Salaires des opérateurs"),s("li",{class:"breadcrumb-item","aria-current":"page"},"Listes des salaires")])],-1)])]),_:1}),s("div",Le,[i(De)])],64)}}});typeof P=="function"&&P(Ie);export{Ie as default};
