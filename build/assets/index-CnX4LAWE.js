import{_ as P}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{_ as q}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{d as M,m as J,f as K,o as d,w as o,h as l,i as t,a as p,e as x,b as e,F as B,r as Q,n as i,g as r,t as c,a1 as v,a0 as $,V as g,G as w,a2 as R}from"./index-djH96c7W.js";import{u as W}from"./use_machine_actions-JCCI023B.js";import{u as X,C as Y,a as Z,V as ee}from"./CustomTable-BpPpXVY0.js";import{V as te}from"./VChip-CI_Lgiys.js";import{b as A}from"./route-block-B_A1xBdJ.js";import"./api_route-BfCuro4K.js";import"./machines-DgIDqdM-.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./VAvatar-DCqiVCq3.js";const se={class:"flex items-center gap-2"},ae={class:"flex justify-end items-center gap-2"},le={key:0,class:"mr-2 flex items-center"},oe={key:0},ne={class:"info-column-"},ie={class:"info-detail"},re={class:"info-detail"},ce={class:"text-center"},de={class:"btn-group btn-group"},ue=["onClick"],me=["onClick"],pe=["onClick"],fe=M({__name:"MachineListView",setup(T){const{processing:n,machines:u,getMachines:m,updateMachineActivateOrDeactivate:h,deleteMachine:k}=W(),{selected:f,selectedCount:b,allSelected:C,someSelected:z,isSelected:y,toggleSelect:D,toggleSelectAll:L,clearSelection:N}=X(()=>u.value),{tableClasses:S,getStatusBadge:H,getStatusText:j,commonHeaders:F}=Z(),G=F.machine(),U=async()=>{if(f.value.length===0)return;if(f.value.length>20){R.error("Vous ne pouvez pas supprimer plus de 20 utilisateurs à la fois.");return}if(confirm(`Êtes-vous sûr de vouloir supprimer ${b.value} utilisateur(s) sélectionné(s) ?`)){for(const s of f.value)await k(s.interface);N(),await m()}},E=async()=>{await m()};return J(async()=>{await m()}),(I,s)=>{const O=q;return d(),K(O,{class:i(["block-mode-loading-oneui",{"block-mode-loading":t(n)}])},{title:o(()=>[e("div",se,[l(g,{icon:"fa fa-refresh",loading:t(n),disabled:t(n),color:"success",type:"button",onClick:E,class:"btn-block-option",variant:"tonal"},null,8,["loading","disabled"])])]),options:o(()=>[e("div",ae,[t(b)>0?(d(),p("div",le,[l(te,{color:"primary",size:"small",class:"mr-2"},{default:o(()=>[r(c(t(b))+" sélectionné(s)",1)]),_:1}),l(g,{type:"button",variant:"flat",color:"error",class:"mr-1",loading:t(n),disabled:t(n),onClick:U},{default:o(()=>[l(w,{icon:"fa fa-delete",size:"small"}),s[1]||(s[1]=e("span",{class:"ml-1"},"Supprimer",-1))]),_:1},8,["loading","disabled"])])):x("",!0),l(g,{type:"button",variant:"flat",color:"success",onClick:s[0]||(s[0]=_=>t($).push("/machines/add"))},{default:o(()=>[l(w,{icon:"fa fa-plus",size:"small"}),s[2]||(s[2]=e("span",{class:"ml-1"},"Ajouter",-1))]),_:1})])]),default:o(()=>[l(Y,{headers:t(G),items:t(u),selectable:!0,"all-selected":t(C),"some-selected":t(z)&&!t(C),onToggleSelectAll:t(L)},{body:o(({items:_})=>[_.length===0?(d(),p("tr",oe,[...s[3]||(s[3]=[e("td",{colspan:"4",class:"text-center text-muted py-4"}," Aucune machine trouvé ",-1)])])):x("",!0),(d(!0),p(B,null,Q(_,a=>(d(),p("tr",{key:a.id,class:i({"table-active":t(y)(a)})},[e("td",null,[l(ee,{"model-value":t(y)(a),"hide-details":"","onUpdate:modelValue":()=>t(D)(a)},null,8,["model-value","onUpdate:modelValue"])]),e("td",ne,[e("div",ie,[s[4]||(s[4]=e("i",{class:"fa fa-code me-1"},null,-1)),r("["+c(a.code)+"] ",1)]),e("div",re,[s[5]||(s[5]=e("i",{class:"fa fa-map-marker me-1"},null,-1)),r(c(a.emplacement),1)]),e("span",null,c(a.estAttribuee?"Attribuée":"Disponible"),1)]),e("td",null,[e("span",{class:i(t(H)(a.is_active))},c(t(j)(a.is_active)),3)]),e("td",ce,[e("div",de,[e("button",{type:"button",class:"btn btn-sm btn-alt-secondary",onClick:V=>t(h)(a.id,a.is_active,{code:a.code,emplacement:a.emplacement})},[e("i",{class:i(`${a.is_active?"fa-ban":"fa-check-double"} fa fa-fw mr-0`)},null,2),l(v,{activator:"parent",location:"top"},{default:o(()=>[r(c(a.is_active?"Désactiver":"Activer"),1)]),_:2},1024)],8,ue),e("button",{type:"button",class:i(t(S).button.action),onClick:V=>{t($).push(`/machines/edit/${a.id}`)}},[s[7]||(s[7]=e("i",{class:"fa fa-fw fa-pencil-alt mr-0"},null,-1)),l(v,{activator:"parent",location:"top"},{default:o(()=>[...s[6]||(s[6]=[r("Modifier",-1)])]),_:1})],10,me),e("button",{type:"button",class:i(t(S).button.danger),onClick:V=>t(k)(a.interface)},[s[9]||(s[9]=e("i",{class:"fa fa-fw fa-times mr-0"},null,-1)),l(v,{activator:"parent",location:"top"},{default:o(()=>[...s[8]||(s[8]=[r("Supprimer",-1)])]),_:1})],10,pe)])])],2))),128))]),_:1},8,["headers","items","all-selected","some-selected","onToggleSelectAll"])]),_:1},8,["class"])}}}),be={class:"content"},_e="Machines",ve="Gérez les machines de l'entreprise efficacement.",ge=M({__name:"index",setup(T){return(n,u)=>{const m=P;return d(),p(B,null,[l(m,{title:_e,subtitle:ve},{extra:o(()=>[...u[0]||(u[0]=[e("nav",{"aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb breadcrumb-alt"},[e("li",{class:"breadcrumb-item","aria-current":"page"},"Machines"),e("li",{class:"breadcrumb-item","aria-current":"page"},"Liste des machines")])],-1)])]),_:1}),e("div",be,[l(fe)])],64)}}});typeof A=="function"&&A(ge);export{ge as default};
