import{_ as w}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{_ as T}from"./OperatorSalaryForm.vue_vue_type_script_setup_true_lang-BwR7H8du.js";import{_ as k}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{u as H,a as P,O as V}from"./use_operator_salary_ action-KJsmK9Ap.js";import{d as M,a3 as L,N as $,c as N,k as u,m as U,f as j,o as B,w as f,b as l,h as m,i as v,n as R,a0 as z,a2 as _,q as I,a as q,g as D,F as G}from"./index-djH96c7W.js";import{A as b,U as J}from"./api_route-BfCuro4K.js";import{b as y}from"./route-block-B_A1xBdJ.js";import"./index-C-RzZ9jy.js";import"./use_operator_actions-DfzruNlO.js";import"./machines-DgIDqdM-.js";import"./createSimpleFunctional-CGAgNBGN.js";import"./VAvatar-DCqiVCq3.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./VAutocomplete-DEo5Cp29.js";import"./VSelect-D7Z0k7d_.js";import"./VTextField-BiIaNMKF.js";import"./VMenu-C6zDN-ie.js";import"./VChip-CI_Lgiys.js";import"./VRow-DOGGYPzI.js";const K={class:"pb-8"},g="Modifier le calcul de salaire de l'opérateur",Q="Enregistrer",W="fa fa-floppy-o",X=M({__name:"OperatorSalaryEditView",setup(F){const i=L("operatorSalaryEditView"),o=$(),d=N(()=>!!o.params.id),s=u(null),n=u({date:"",chiffreAffaireMensuelttc:0,chiffreAffaireHorsTaxe:0,percentCommissionBrute:0,commissionBrute:0,fel:0,aib:0,penalite:0,calculatedFraisMomo:0,dette:0,remboursement:0,ecart:0,totalPrelevements:0,salaireBrut:0,percentFraisMomo:0,payement:0,operator_id:""}),a=u({date:[],chiffreAffaireMensuelttc:[],chiffreAffaireHorsTaxe:[],percentCommissionBrute:[],commissionBrute:[],fel:[],aib:[],penalite:[],calculatedFraisMomo:[],dette:[],remboursement:[],ecart:[],totalPrelevements:[],salaireBrut:[],percentFraisMomo:[],payement:[],operator_id:[]}),c=u(null),{processing:p}=H(),A=e=>{a.value.date=e.data.date||[],a.value.chiffreAffaireMensuelttc=e.data.chiffreAffaireMensuelttc||[],a.value.chiffreAffaireHorsTaxe=e.data.chiffreAffaireHorsTaxe||[],a.value.percentCommissionBrute=e.data.percentCommissionBrute||[],a.value.commissionBrute=e.data.commissionBrute||[],a.value.fel=e.data.fel||[],a.value.aib=e.data.aib||[],a.value.penalite=e.data.penalite||[],a.value.calculatedFraisMomo=e.data.calculatedFraisMomo||[],a.value.dette=e.data.dette||[],a.value.remboursement=e.data.remboursement||[],a.value.ecart=e.data.ecart||[],a.value.totalPrelevements=e.data.totalPrelevements||[],a.value.salaireBrut=e.data.salaireBrut||[],a.value.percentFraisMomo=e.data.percentFraisMomo||[],a.value.payement=e.data.payement||[],a.value.operator_id=e.data.operator_id||[]},S=async()=>{s.value||(s.value=await P());const e=o.params.id;await s.value.getOperatorSalarys();const r=await s.value.findOperatorSalary(e);if(r instanceof b){c.value={type:"danger",id:"0012",title:"Erreur",message:r.message};return}const t=new V(r.interface);n.value={date:t.date,chiffreAffaireMensuelttc:t.chiffreAffaireMensuelttc,chiffreAffaireHorsTaxe:t.chiffreAffaireHorsTaxe,percentCommissionBrute:t.percentCommissionBrute,commissionBrute:t.commissionBrute,fel:t.fel,aib:t.aib,penalite:t.penalite,calculatedFraisMomo:t.calculatedFraisMomo,dette:t.dette,remboursement:t.remboursement,ecart:t.ecart,totalPrelevements:t.totalPrelevements,salaireBrut:t.salaireBrut,percentFraisMomo:t.percentFraisMomo,payement:t.payement,operator_id:t.operator_id??""}},h=async e=>{if(!s.value)return i.error("Le store operator Salary n'est pas initialisé."),!1;i.info("Mise à jour du calcul de salaire",e);const r=await s.value.updateOperatorSalary(o.params.id,e);return r instanceof b?(r instanceof J?A(r):(_.error(r.message),i.error("Erreur lors de la mise à jour du calcul de salaire",r)),c.value={type:"danger",id:"0012",title:"Erreur",message:r.message},!1):(i.info("Calcul de salaire mis à jour avec succès",r),_.success("Calcul de salaire modifié avec succès !"),!0)},x=()=>{a.value={date:[],chiffreAffaireMensuelttc:[],chiffreAffaireHorsTaxe:[],percentCommissionBrute:[],commissionBrute:[],fel:[],aib:[],penalite:[],calculatedFraisMomo:[],dette:[],remboursement:[],ecart:[],totalPrelevements:[],salaireBrut:[],percentFraisMomo:[],payement:[],operator_id:[]},c.value=null},C=async()=>{if(x(),!s.value){i.error("Le store operator salary n'est pas initialisé.");return}i.info("Soumission du formulaire de calcul de salaire",n.value),await h({...n.value})&&z.push("/operators")};return U(async()=>{await S()}),(e,r)=>{const t=T;return B(),j(k,{title:g,class:R(["block-mode-loading-oneui",{"block-mode-loading":v(p)}])},{default:f(()=>[l("div",K,[m(t,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=O=>n.value=O),loading:v(p),errors:a.value,alert:c.value,"action-description":g,"action-text":Q,"action-icon":W,"is-edit-mode":d.value,onSubmit:C},null,8,["modelValue","loading","errors","alert","is-edit-mode"])])]),_:1},8,["class"])}}}),Y={"aria-label":"breadcrumb"},Z={class:"breadcrumb breadcrumb-alt"},E={class:"breadcrumb-item","aria-current":"page"},ee={class:"content"},ae="Formulaire de modification du salaire d'un opérateur",te="Modifier le salaire d'un opérateur.",re=M({__name:"[id]",setup(F){return(i,o)=>{const d=I("RouterLink"),s=w;return B(),q(G,null,[m(s,{title:ae,subtitle:te},{extra:f(()=>[l("nav",Y,[l("ol",Z,[o[1]||(o[1]=l("li",{class:"breadcrumb-item","aria-current":"page"},"Salaires de l'opérateur",-1)),l("li",E,[m(d,{to:"/operators-salary"},{default:f(()=>[...o[0]||(o[0]=[D(" Liste des salaires de l'opérateur",-1)])]),_:1})]),o[2]||(o[2]=l("li",{class:"breadcrumb-item active","aria-current":"page"},"Formulaire de modification du salaire d'un opérateur",-1))])])]),_:1}),l("div",ee,[m(X)])],64)}}});typeof y=="function"&&y(re);export{re as default};
