import{d as C,k as r,m as L,p as j,a as v,o as g,y as B,b as e,e as T,h as a,w as u,g as c,i as m,V as U,a4 as $,a2 as F,a0 as I,u as M,t as _}from"./index-djH96c7W.js";import{f as N}from"./chunk-TVFJBHBT-BUrEn1b-.js";import{r as x}from"./index-C-RzZ9jy.js";import{V as w,a as b}from"./VTextField-BiIaNMKF.js";import{a as V}from"./VInput-CtsUFMyD.js";import{b as h}from"./route-block-B_A1xBdJ.js";import"./index-BQUvywfj.js";const q={class:"py-3"},A={key:0,cols:"12"},D=["type","id","title","message","onClose"],R={class:"row justify-content-center px-3"},z=C({__name:"LoginForm",setup(S){const p=r(),i=r(!1),t=r(null),o=r(null),d=r(!1),l=r({credential:"",password:""}),n=r({credential:[],password:[]}),k=()=>{i.value=!i.value},E=async()=>{if(console.log("SUBMIT CALLED"),d.value=!0,$.logger.info("Submitting login form",l.value),l.value.credential)n.value.credential=[];else{n.value.credential=["L'email ou identifiant est requis"],d.value=!1;return}if(l.value.password)n.value.password=[];else{n.value.password=["Le mot de passe est requis"],d.value=!1;return}try{console.log("VALID => continue dans le try"),console.log("result avant",l.value),F.success("Connexion réussie !"),setTimeout(()=>{I.push({name:"operators"})},2e3);return}catch(y){console.error("Erreur inattendue pendant la connexion:",y),o.value={type:"danger",id:N.string.uuid(),title:"Erreur inattendue",message:"Une erreur est survenue. Veuillez réessayer plus tard."}}finally{d.value=!1}};return L(async()=>{t.value=await j()}),(y,s)=>(g(),v("form",{ref_key:"loginFormRef",ref:p,onSubmit:B(E,["prevent"])},[e("div",q,[o.value?(g(),v("div",A,[e("div",{type:o.value.type,id:o.value.id,title:o.value.title,message:o.value.message,closable:!0,onClose:()=>{o.value=null}},null,40,D)])):T("",!0),a(w,{cols:"12"},{default:u(()=>[a(V,{class:"mb-2",for:"email"},{default:u(()=>[...s[2]||(s[2]=[c("Email",-1)])]),_:1}),a(b,{id:"email",modelValue:l.value.credential,"onUpdate:modelValue":s[0]||(s[0]=f=>l.value.credential=f),placeholder:"Example@gmail.com",rules:[m(x)],variant:"filled",density:"compact","prepend-inner-icon":"fa fa-envelope","persistent-placeholder":"","error-messages":n.value.credential},null,8,["modelValue","rules","error-messages"])]),_:1}),a(w,{cols:"12"},{default:u(()=>[a(V,{class:"mb-2",for:"password"},{default:u(()=>[...s[3]||(s[3]=[c("Mot de passe",-1)])]),_:1}),a(b,{id:"password",modelValue:l.value.password,"onUpdate:modelValue":s[1]||(s[1]=f=>l.value.password=f),placeholder:"********",rules:[m(x)],variant:"filled",density:"compact","append-inner-icon":i.value?"fa fa-eye-slash":"fa fa-eye","persistent-placeholder":"",type:i.value?"text":"password","onClick:appendInner":k,"error-messages":n.value.password},null,8,["modelValue","rules","append-inner-icon","type","error-messages"])]),_:1})]),e("div",R,[a(U,{type:"submit",color:"success",loading:d.value,class:"flex justify-center items-center gap-8"},{default:u(()=>[...s[4]||(s[4]=[c(" Connexion ",-1)])]),_:1},8,["loading"])])],544))}}),P={class:"hero-static d-flex align-items-center bg-body-extra-light"},G={class:"w-100 bg-body-light shadow-sm"},H={class:"bg-body-light"},J={class:"content content-full"},K={class:"row g-0 justify-content-center"},O={class:"col-md-8 col-lg-6 col-xl-4 py-4 px-4 px-lg-5"},Q={class:"fs-sm text-center text-muted py-3 flex justify-center items-center gap-2 flex-col sm:flex-row"},W=C({__name:"login",setup(S){const p=M();return(i,t)=>(g(),v("div",P,[e("div",G,[e("div",H,[e("div",J,[e("div",K,[e("div",O,[t[0]||(t[0]=e("div",{class:"text-center"},[e("div",{class:"mb-2 flex justify-center"}),e("h1",{class:"h4 mb-1"},"Connecter vous")],-1)),a(z)])])])]),e("div",Q,[e("div",null,[e("strong",null,_(m(p).app.name),1),c(" © "+_(m(p).app.copyright),1)]),t[1]||(t[1]=e("div",{class:"hidden sm:inline"},"—",-1)),t[2]||(t[2]=e("div",{class:"flex items-center gap-2"},[c(" • "),e("span",{class:"text-primary"},"copyRight")],-1))])])]))}});typeof h=="function"&&h(W);export{W as default};
