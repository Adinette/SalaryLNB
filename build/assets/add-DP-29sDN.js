import{_ as M}from"./BasePageHeading.vue_vue_type_script_setup_true_lang-D3hGS5P4.js";import{_ as x}from"./OperatorSalaryForm.vue_vue_type_script_setup_true_lang-BwR7H8du.js";import{_ as h}from"./BaseBlock.vue_vue_type_script_setup_true_lang-BhfpUZf_.js";import{d as p,a3 as k,k as n,f as S,o as _,w as c,b as o,h as i,i as m,n as T,a0 as V,a2 as O,q as w,a as H,g as P,F as $}from"./index-djH96c7W.js";import{A as L,U}from"./api_route-BfCuro4K.js";import{f as N}from"./chunk-TVFJBHBT-BUrEn1b-.js";import{u as R}from"./use_operator_salary_ action-KJsmK9Ap.js";import{b as d}from"./route-block-B_A1xBdJ.js";import"./index-C-RzZ9jy.js";import"./use_operator_actions-DfzruNlO.js";import"./machines-DgIDqdM-.js";import"./createSimpleFunctional-CGAgNBGN.js";import"./VAvatar-DCqiVCq3.js";import"./VInput-CtsUFMyD.js";import"./index-BQUvywfj.js";import"./VAutocomplete-DEo5Cp29.js";import"./VSelect-D7Z0k7d_.js";import"./VTextField-BiIaNMKF.js";import"./VMenu-C6zDN-ie.js";import"./VChip-CI_Lgiys.js";import"./VRow-DOGGYPzI.js";const q={class:"pb-8"},f="Calculer le salaire de l'opérateur",z="Calculer",D="fa fa-calculator",I=p({__name:"OperatorCalculateSalaryView",setup(v){const s=k("operatorAddView"),t=n({date:"",chiffreAffaireMensuelttc:0,chiffreAffaireHorsTaxe:0,percentCommissionBrute:0,commissionBrute:0,fel:0,aib:0,penalite:0,calculatedFraisMomo:0,dette:0,remboursement:0,ecart:0,totalPrelevements:0,salaireBrut:0,percentFraisMomo:0,payement:0,operator_id:""}),a=n({date:[],chiffreAffaireMensuelttc:[],chiffreAffaireHorsTaxe:[],percentCommissionBrute:[],commissionBrute:[],fel:[],aib:[],penalite:[],calculatedFraisMomo:[],dette:[],remboursement:[],ecart:[],totalPrelevements:[],salaireBrut:[],percentFraisMomo:[],payement:[],operator_id:[]}),l=n(null),{processing:u,createOperatorSalary:b}=R(),g=e=>{a.value.date=e.data.date||[],a.value.chiffreAffaireMensuelttc=e.data.chiffreAffaireMensuelttc||[],a.value.chiffreAffaireHorsTaxe=e.data.chiffreAffaireHorsTaxe||[],a.value.percentCommissionBrute=e.data.percentCommissionBrute||[],a.value.commissionBrute=e.data.commissionBrute||[],a.value.fel=e.data.fel||[],a.value.aib=e.data.aib||[],a.value.penalite=e.data.penalite||[],a.value.calculatedFraisMomo=e.data.calculatedFraisMomo||[],a.value.dette=e.data.dette||[],a.value.remboursement=e.data.remboursement||[],a.value.ecart=e.data.ecart||[],a.value.totalPrelevements=e.data.totalPrelevements||[],a.value.salaireBrut=e.data.salaireBrut||[],a.value.percentFraisMomo=e.data.percentFraisMomo||[],a.value.payement=e.data.payement||[],a.value.operator_id=e.data.operator_id||[]},B=async e=>{s.info("Calcul de salaire",e);const r=await b(e);return r instanceof L?(r instanceof U?g(r):(O.error(r.message),s.error("Erreur lors du calcul de salaire",r)),l.value={type:"danger",id:N.string.uuid(),title:"Erreur",message:r.message},!1):(s.info("Calcul de salaire effectué avec succès",r),!0)},y=()=>{a.value={date:[],chiffreAffaireMensuelttc:[],chiffreAffaireHorsTaxe:[],percentCommissionBrute:[],commissionBrute:[],fel:[],aib:[],penalite:[],calculatedFraisMomo:[],dette:[],remboursement:[],ecart:[],totalPrelevements:[],salaireBrut:[],percentFraisMomo:[],payement:[],operator_id:[]},l.value=null},A=async()=>{y(),s.info("Soumission du formulaire de calcul de salaire",t.value),await B({...t.value})&&V.push("/operators-salary")};return(e,r)=>{const F=x;return _(),S(h,{title:f,class:T(["block-mode-loading-oneui",{"block-mode-loading":m(u)}])},{default:c(()=>[o("div",q,[i(F,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=C=>t.value=C),loading:m(u),errors:a.value,alert:l.value,"action-description":f,"action-text":z,"action-icon":D,onSubmit:A},null,8,["modelValue","loading","errors","alert"])])]),_:1},8,["class"])}}}),j={"aria-label":"breadcrumb"},G={class:"breadcrumb breadcrumb-alt"},J={class:"breadcrumb-item","aria-current":"page"},K={class:"content"},Q="Formulaire de calcul de l'Opérateur",W="Calculer le salaire d'un Opérateur.",X=p({__name:"add",setup(v){return(s,t)=>{const a=w("RouterLink"),l=M;return _(),H($,null,[i(l,{title:Q,subtitle:W},{extra:c(()=>[o("nav",j,[o("ol",G,[t[1]||(t[1]=o("li",{class:"breadcrumb-item","aria-current":"page"},"Salaire d'un opérateur",-1)),o("li",J,[i(a,{to:"/operators-salary"},{default:c(()=>[...t[0]||(t[0]=[P(" Liste des salaires de l'opérateur",-1)])]),_:1})]),t[2]||(t[2]=o("li",{class:"breadcrumb-item active","aria-current":"page"},"Formulaire de calcul de salaire d'un opérateur",-1))])])]),_:1}),o("div",K,[i(I)])],64)}}});typeof d=="function"&&d(X);export{X as default};
