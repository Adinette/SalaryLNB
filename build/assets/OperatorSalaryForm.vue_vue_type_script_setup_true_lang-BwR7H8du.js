import{a6 as N,a7 as D,am as de,aa as L,h as t,O as G,n as Q,an as O,ao as w,b,F as Y,G as Z,ap as K,t as q,aq as le,ar as j,as as _,at as ue,au as me,av as pe,aw as fe,ax as ce,ay as ve,az as ye,aA as be,aB as ge,aC as Ve,aD as xe,aE as Ce,R as k,z as ke,aF as Ae,aG as Be,ac as Ie,aH as Pe,aI as Se,aJ as Me,aK as Fe,aL as Ee,aM as Te,aN as Ue,aO as Re,aP as Ne,aQ as De,d as Le,N as Oe,k as J,m as ee,c as x,aR as we,a as he,o as ae,w as o,g as p,i as v,y as He,f as ze,e as qe,V as je}from"./index-djH96c7W.js";import{r as C}from"./index-C-RzZ9jy.js";import{u as Ge}from"./use_operator_actions-DfzruNlO.js";import{c as Qe}from"./createSimpleFunctional-CGAgNBGN.js";import{V as te,a as $e}from"./VAvatar-DCqiVCq3.js";import{a as f}from"./VInput-CtsUFMyD.js";import{V as Je}from"./VAutocomplete-DEo5Cp29.js";import{V as Ke,a as H,b as We}from"./VRow-DOGGYPzI.js";import{V as m,a as c}from"./VTextField-BiIaNMKF.js";const Xe=D({...w(),...O()},"VCardActions"),Ye=N()({name:"VCardActions",props:Xe(),setup(e,y){let{slots:l}=y;return de({VBtn:{slim:!0,variant:"text"}}),L(()=>t(e.tag,{class:Q(["v-card-actions",e.class]),style:G(e.style)},l)),{}}}),Ze=D({opacity:[Number,String],...w(),...O()},"VCardSubtitle"),_e=N()({name:"VCardSubtitle",props:Ze(),setup(e,y){let{slots:l}=y;return L(()=>t(e.tag,{class:Q(["v-card-subtitle",e.class]),style:G([{"--v-card-subtitle-opacity":e.opacity},e.style])},l)),{}}}),ea=Qe("v-card-title"),aa=D({appendAvatar:String,appendIcon:j,prependAvatar:String,prependIcon:j,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...w(),...le(),...O()},"VCardItem"),ta=N()({name:"VCardItem",props:aa(),setup(e,y){let{slots:l}=y;return L(()=>{const i=!!(e.prependAvatar||e.prependIcon),R=!!(i||l.prepend),B=!!(e.appendAvatar||e.appendIcon),I=!!(B||l.append),P=!!(e.title!=null||l.title),S=!!(e.subtitle!=null||l.subtitle);return t(e.tag,{class:Q(["v-card-item",e.class]),style:G(e.style)},{default:()=>{var s;return[R&&b("div",{key:"prepend",class:"v-card-item__prepend"},[l.prepend?t(K,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},l.prepend):b(Y,null,[e.prependAvatar&&t(te,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&t(Z,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),b("div",{class:"v-card-item__content"},[P&&t(ea,{key:"title"},{default:()=>{var u;return[((u=l.title)==null?void 0:u.call(l))??q(e.title)]}}),S&&t(_e,{key:"subtitle"},{default:()=>{var u;return[((u=l.subtitle)==null?void 0:u.call(l))??q(e.subtitle)]}}),(s=l.default)==null?void 0:s.call(l)]),I&&b("div",{key:"append",class:"v-card-item__append"},[l.append?t(K,{key:"append-defaults",disabled:!B,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},l.append):b(Y,null,[e.appendIcon&&t(Z,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&t(te,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]}})}),{}}}),la=D({opacity:[Number,String],...w(),...O()},"VCardText"),re=N()({name:"VCardText",props:la(),setup(e,y){let{slots:l}=y;return L(()=>t(e.tag,{class:Q(["v-card-text",e.class]),style:G([{"--v-card-text-opacity":e.opacity},e.style])},l)),{}}}),ra=D({appendAvatar:String,appendIcon:j,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:j,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...De(),...w(),...le(),...Ne(),...Re(),...Ue(),...Te(),...Ee(),...Fe(),...Me(),...O(),...Se(),...Pe({variant:"elevated"})},"VCard"),sa=N()({name:"VCard",directives:{vRipple:_},props:ra(),setup(e,y){let{attrs:l,slots:i}=y;const{themeClasses:R}=ue(e),{borderClasses:B}=me(e),{colorClasses:I,colorStyles:P,variantClasses:S}=pe(e),{densityClasses:s}=fe(e),{dimensionStyles:u}=ce(e),{elevationClasses:M}=ve(e),{loaderClasses:A}=ye(e),{locationStyles:F}=be(e),{positionClasses:E}=ge(e),{roundedClasses:T}=Ve(e),U=xe(e,l),h=Ce(void 0);return k(()=>e.loading,(g,V)=>{h.value=!g&&typeof V=="string"?V:typeof g=="boolean"?void 0:g},{immediate:!0}),L(()=>{const g=e.link!==!1&&U.isLink.value,V=!e.disabled&&e.link!==!1&&(e.link||U.isClickable.value),$=g?"a":e.tag,d=!!(i.title||e.title!=null),a=!!(i.subtitle||e.subtitle!=null),n=d||a,r=!!(i.append||e.appendAvatar||e.appendIcon),se=!!(i.prepend||e.prependAvatar||e.prependIcon),ne=!!(i.image||e.image),oe=n||se||r,ie=!!(i.text||e.text!=null);return ke(t($,Ie(U.linkProps,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":V},R.value,B.value,I.value,s.value,M.value,A.value,E.value,T.value,S.value,e.class],style:[P.value,u.value,F.value,e.style],onClick:V&&U.navigate,tabindex:e.disabled?-1:void 0}),{default:()=>{var W;return[ne&&b("div",{key:"image",class:"v-card__image"},[i.image?t(K,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):t($e,{key:"image-img",cover:!0,src:e.image},null)]),t(Be,{name:"v-card",active:!!e.loading,color:h.value},{default:i.loader}),oe&&t(ta,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),ie&&t(re,{key:"text"},{default:()=>{var X;return[((X=i.text)==null?void 0:X.call(i))??e.text]}}),(W=i.default)==null?void 0:W.call(i),i.actions&&t(Ye,null,{default:i.actions}),Ae(V,"v-card")]}}),[[_,V&&e.ripple]])}),{}}}),na={class:"p-4"},oa={class:"mb-6"},z=2500,ba=Le({__name:"OperatorSalaryForm",props:{modelValue:{},loading:{type:Boolean},errors:{},alert:{},actionDescription:{},actionText:{},actionIcon:{},isEditMode:{type:Boolean}},emits:["update:modelValue","submit"],setup(e,{emit:y}){const l=e,i=y,{operators:R,getOperators:B}=Ge(),I=Oe(),P=J(null),S=J(),s=J({...l.modelValue});k(()=>l.modelValue,d=>{s.value={...d}}),ee(async()=>{await Promise.all([B()])});function u(d,a){s.value[d]=a,i("update:modelValue",{...s.value})}const M=x(()=>s.value.chiffreAffaireMensuelttc/1.1),A=x(()=>M.value*(s.value.percentCommissionBrute/100)),F=x(()=>A.value*.05),E=x(()=>(s.value.ecart||0)*.15),T=x(()=>(s.value.payement||0)*(s.value.percentFraisMomo||0)/100),U=x(()=>(E.value||0)+(s.value.remboursement||0)+(s.value.dette||0)+(s.value.ecart||0)+(T.value||0)),h=x(()=>z+F.value+U.value),g=x(()=>A.value-h.value);k(M,d=>{s.value.chiffreAffaireHorsTaxe=d}),k(A,d=>{s.value.commissionBrute=d}),k(F,d=>{s.value.aib=d}),k(E,d=>{s.value.penalite=d}),k(T,d=>{s.value.calculatedFraisMomo=d}),k(g,d=>{s.value.salaireBrut=d}),we(()=>{s.value.fel=z});async function V(){var a;const d=await((a=S.value)==null?void 0:a.validate());d&&d.valid&&(s.value.chiffreAffaireHorsTaxe=M.value,s.value.commissionBrute=A.value,s.value.aib=F.value,s.value.penalite=E.value,s.value.calculatedFraisMomo=T.value,s.value.fel=z,s.value.salaireBrut=g.value,i("submit",{...s.value}))}const $=x(()=>R.value.map(d=>({...d,label:`${d.first_name} - ${d.last_name}`,id:d.id})));return ee(()=>{I.query.operatorId&&(P.value=String(I.query.operatorId),s.value.operator_id=P.value)}),(d,a)=>(ae(),he("div",na,[b("div",oa,[t(sa,{elevation:"0"},{default:o(()=>[t(re,null,{default:o(()=>{var n;return[t(f,{for:"operator-select",class:"text-lg font-semibold mb-3"},{default:o(()=>[...a[25]||(a[25]=[p("Sélection de l'opérateur",-1)])]),_:1}),t(Je,{id:"operator-select",items:$.value,"item-title":"label","item-value":"id",modelValue:s.value.operator_id,"onUpdate:modelValue":[a[0]||(a[0]=r=>s.value.operator_id=r),a[1]||(a[1]=r=>u("operator_id",r))],placeholder:"Sélectionnez l'opérateur",variant:"filled",density:"compact",rules:[v(C)],"error-messages":(n=l.errors)==null?void 0:n.operator_id},null,8,["items","modelValue","rules","error-messages"])]}),_:1})]),_:1})]),t(Ke,{ref_key:"formRef",ref:S,onSubmit:He(V,["prevent"])},{default:o(()=>[t(v(H),null,{default:o(()=>[t(m,{cols:"12",class:"text-left"},{default:o(()=>[...a[26]||(a[26]=[b("span",{class:"text-subtitle-1"},"Remplissez les informations du calcul du salaire de l'opérateur",-1),b("br",null,null,-1),b("span",{class:"text-subtitle-2 text-muted"},"Les champs marqués d'un * sont obligatoires",-1)])]),_:1}),t(v(H),null,{default:o(()=>[t(m,{cols:"12"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-date"},{default:o(()=>[...a[27]||(a[27]=[p("Date de calcul du salaire *",-1)])]),_:1}),t(c,{id:"operator-salary-date",modelValue:s.value.date,"onUpdate:modelValue":[a[2]||(a[2]=r=>s.value.date=r),a[3]||(a[3]=r=>u("date",r))],placeholder:"Ex: 01/10/2025",rules:[v(C)],variant:"filled",density:"compact",type:"date","prepend-inner-icon":"ri-operator-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.date},null,8,["modelValue","rules","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-chiffre-affaire-ttc"},{default:o(()=>[...a[28]||(a[28]=[p("Chiffre d'affaire TTC *",-1)])]),_:1}),t(c,{id:"operator-salary-chiffre-affaire-ttc",modelValue:s.value.chiffreAffaireMensuelttc,"onUpdate:modelValue":[a[4]||(a[4]=r=>s.value.chiffreAffaireMensuelttc=r),a[5]||(a[5]=r=>u("chiffreAffaireMensuelttc",r))],placeholder:"Ex: 200000",rules:[v(C)],variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-operator-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.chiffreAffaireMensuelttc},null,8,["modelValue","rules","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-chiffre-affaire-hors-taxe"},{default:o(()=>[...a[29]||(a[29]=[p("Chiffre d'affaire hors taxe *",-1)])]),_:1}),t(c,{id:"operator-salary-chiffre-affaire-hors-taxe","model-value":M.value,placeholder:"Ex: 166666",rules:[v(C)],variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-mail-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.chiffreAffaireHorsTaxe,"onUpdate:modelValue":a[6]||(a[6]=r=>u("chiffreAffaireHorsTaxe",r))},null,8,["model-value","rules","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-percent-commission"},{default:o(()=>[...a[30]||(a[30]=[p("Commission %",-1)])]),_:1}),t(c,{id:"operator-salary-percent-commission",modelValue:s.value.percentCommissionBrute,"onUpdate:modelValue":[a[7]||(a[7]=r=>s.value.percentCommissionBrute=r),a[8]||(a[8]=r=>u("percentCommissionBrute",r))],placeholder:"Ex: 15%",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"",rules:[v(C)],"error-messages":(n=l.errors)==null?void 0:n.percentCommissionBrute},null,8,["modelValue","rules","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-brute-commission"},{default:o(()=>[...a[31]||(a[31]=[p(" Commission brute",-1)])]),_:1}),t(c,{id:"operator-salary-brute-commission","model-value":A.value,placeholder:"Ex: 150000",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"",rules:[v(C)],"error-messages":(n=l.errors)==null?void 0:n.commissionBrute,"onUpdate:modelValue":a[9]||(a[9]=r=>u("commissionBrute",r))},null,8,["model-value","rules","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-payement"},{default:o(()=>[...a[32]||(a[32]=[p(" Nette à verser",-1)])]),_:1}),t(c,{id:"operator-salary-payement",modelValue:s.value.payement,"onUpdate:modelValue":[a[10]||(a[10]=r=>s.value.payement=r),a[11]||(a[11]=r=>u("payement",r))],placeholder:"Ex: 150000",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.payement},null,8,["modelValue","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-percent-frais-momo"},{default:o(()=>[...a[33]||(a[33]=[p("Pourcentage Frais MOMO",-1)])]),_:1}),t(c,{id:"operator-salary-percent-frais-momo",modelValue:s.value.percentFraisMomo,"onUpdate:modelValue":[a[12]||(a[12]=r=>s.value.percentFraisMomo=r),a[13]||(a[13]=r=>u("percentFraisMomo",r))],placeholder:"Ex: 15%",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.percentFraisMomo},null,8,["modelValue","error-messages"])]}),_:1}),t(m,{cols:"12"},{default:o(()=>[...a[34]||(a[34]=[b("p",{class:"font-medium mt-4 text-justify"},"Autres Prélèvements",-1)])]),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-fel"},{default:o(()=>[...a[35]||(a[35]=[p("FEL",-1)])]),_:1}),t(c,{id:"operator-salary-fel","model-value":z,placeholder:"Ex: 1500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"",rules:[v(C)],"error-messages":(n=l.errors)==null?void 0:n.fel,"onUpdate:modelValue":a[14]||(a[14]=r=>u("fel",r))},null,8,["rules","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-aib"},{default:o(()=>[...a[36]||(a[36]=[p("AIB",-1)])]),_:1}),t(c,{id:"operator-salary-aib","model-value":F.value,readonly:"",placeholder:"Ex: 2500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"",rules:[v(C)],"error-messages":(n=l.errors)==null?void 0:n.aib,"onUpdate:modelValue":a[15]||(a[15]=r=>u("aib",r))},null,8,["model-value","rules","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-ecart"},{default:o(()=>[...a[37]||(a[37]=[p("Écart",-1)])]),_:1}),t(c,{id:"operator-salary-ecart",modelValue:s.value.ecart,"onUpdate:modelValue":[a[16]||(a[16]=r=>s.value.ecart=r),a[17]||(a[17]=r=>u("ecart",r))],placeholder:"Ex: 1500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.ecart},null,8,["modelValue","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-dette"},{default:o(()=>[...a[38]||(a[38]=[p("Dette",-1)])]),_:1}),t(c,{id:"operator-salary-dette",modelValue:s.value.dette,"onUpdate:modelValue":[a[18]||(a[18]=r=>s.value.dette=r),a[19]||(a[19]=r=>u("dette",r))],placeholder:"Ex: 1500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.date},null,8,["modelValue","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-remboursement"},{default:o(()=>[...a[39]||(a[39]=[p("Remboursement",-1)])]),_:1}),t(c,{id:"operator-salary-remboursement",modelValue:s.value.remboursement,"onUpdate:modelValue":[a[20]||(a[20]=r=>s.value.remboursement=r),a[21]||(a[21]=r=>u("remboursement",r))],placeholder:"Ex: 1500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.remboursement},null,8,["modelValue","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-penalite"},{default:o(()=>[...a[40]||(a[40]=[p("Pénalité",-1)])]),_:1}),t(c,{id:"operator-salary-penalite","model-value":E.value,placeholder:"Ex: 1500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.penalite,"onUpdate:modelValue":a[22]||(a[22]=r=>u("penalite",r))},null,8,["model-value","error-messages"])]}),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-frais-momo"},{default:o(()=>[...a[41]||(a[41]=[p("Frais MOMO",-1)])]),_:1}),t(c,{id:"operator-salary-frais-momo","model-value":T.value,placeholder:"Ex: 1500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.calculatedFraisMomo,"onUpdate:modelValue":a[23]||(a[23]=r=>u("calculatedFraisMomo",r))},null,8,["model-value","error-messages"])]}),_:1}),t(m,{cols:"12"},{default:o(()=>{var n;return[t(f,{class:"mb-3",for:"operator-salary-brut"},{default:o(()=>[...a[42]||(a[42]=[p("Salaire Brute",-1)])]),_:1}),t(c,{id:"operator-salary-brut","model-value":g.value,placeholder:"Ex: 1500",variant:"filled",density:"compact",type:"number","prepend-inner-icon":"ri-phone-line","persistent-placeholder":"","error-messages":(n=l.errors)==null?void 0:n.salaireBrut,"onUpdate:modelValue":a[24]||(a[24]=r=>u("salaireBrut",r))},null,8,["model-value","error-messages"])]}),_:1})]),_:1})]),_:1}),l.alert?(ae(),ze(v(H),{key:0},{default:o(()=>[t(m,{cols:"12"},{default:o(()=>[t(We,{type:l.alert.type==="danger"?"error":l.alert.type,title:l.alert.title,class:"mb-3"},{default:o(()=>[p(q(l.alert.message),1)]),_:1},8,["type","title"])]),_:1})]),_:1})):qe("",!0),t(v(H),null,{default:o(()=>[t(m,{cols:"12",class:"text-right"},{default:o(()=>[t(je,{type:"submit",color:"success",loading:l.loading,"prepend-icon":l.actionIcon,class:"px-8"},{default:o(()=>[p(q(l.actionText||"Enregistrer"),1)]),_:1},8,["loading","prepend-icon"])]),_:1})]),_:1})]),_:1},512)]))}});export{ba as _};
